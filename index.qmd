---
title: "Amelia Kasprzyk PSY6422 project"
author: "Amelia Kasprzyk"
format:
  html:
    theme: minty
editor: visual
---

# “How do the most-streamed artists at the start of the year compare to the end of the year?”

## Data collection

The data used in this project was obtained from [charts.spotify.com](http://charts.spotify.com/), which publishes weekly rankings of the most-streamed songs on the platform. The two data sets used were from January 3rd-9th 2025, and Novemver 21-27th 2025 (most recent set at time of download). Both of these data sets were taken from the global charts, which show a cumulative ranking from all Spotify users worldwide.

Each data set was downloaded as a CSV (comma-separated values) file. The charts are compiled by Spotify using their internal streaming logs, which record how many times each track was played by users in that week. The data is free to access but requires a free Spotify account in order to download the data sets.

The variables in the data set are as follows:

-   rank – the position of the track in the weekly chart

-   uri – a unique Spotify identifier for each track

-   artist_names – the names of the artists associated with each song

-   track_name – the name of the song

-   streams – the total number of Spotify streams for that track during the chart week

-   weeks_on_chart – how many weeks the track has appeared in the chart

## Research question

This visualisation aims to answer the question :

*“How do the most-streamed artists at the start of the year (January) compare to the end of the year (November)?”*

The visualisation will highlight which artists have the highest number of total streams in each month, how the popularity of these artists changes between the start and end of the year, and whether new artists emerge in November that were not present in January.

By creating this visualisation, the project aims to make the changes in artist popularity from the start to the end of the year digestible and easy to understand.

## Data wrangling

The first step taken was to load the required packages and read in the CSVs.

```{r}
#load the packages required for the code
library(ggplot2)
library(tidyverse)
library(plotly)
```

```{r}
#read in the csv data files
spotify_jan <- read.csv("raw_data/spotify-jan.csv")
spotify_nov <- read.csv("raw_data/spotify-nov.csv")

#have a look at the data 
head(spotify_jan)
head(spotify_nov)

```

Initially, it was necessary to standardise the naming of KPop Demon Hunters. The film, released in June of this year, lists each contributing artist individually; however, for analytical purposes, all artists were grouped under the name KPop Demon Hunters. This adjustment was applied only to the November data set, as it is absent from the January dataset.

```{r}
#rename any artist with "KPop demon" in the name to kpop demon hunters
spotify_nov <- spotify_nov %>%
  mutate(
    artist_names = str_trim(artist_names),
    artist_names = ifelse(
      str_detect(artist_names, regex("KPop Demon", ignore_case = TRUE)),
      "KPop Demon Hunters",
      artist_names))

```

During data tidying, it was observed that some artists appeared multiple times, but streams from their collaborative tracks were not included in their individual totals. To address this and calculate the cumulative streams for all artists, the entries were separated by splitting the artist_names column at the commas.

```{r}
#Split the artist_names into separate artists (e.g., "Bruno Mars, Lady Gaga" becomes "Bruno Mars" and "Lady Gaga"). Applied to both data sets
jan_seperate <- spotify_jan %>%
  separate_rows(artist_names, sep = ", ")

nov_seperate <- spotify_nov %>%
  separate_rows(artist_names, sep = ", ")


if (any(grepl(",", jan_seperate$artist_names)) | any(grepl(",", nov_seperate$artist_names))) stop("Artist splitting failed") #sanity check

```

The next step involved grouping the artists by name, allowing the total streams from all of their songs to be combined and sorted in descending order to identify the top artists by cumulative streams.

```{r}
#group by artist, add up streams and then rank them for both data sets

#jan 
jan_top_artists <- jan_seperate %>%
  group_by(artist_names) %>%               # Put all songs by the same artist together
  summarise(total_streams = sum(streams),  # Add up all their streams
            .groups = "drop") %>%          # Remove grouping boxes
  arrange(desc(total_streams))             # Sort from biggest to smallest

#nov
nov_top_artists  <- nov_seperate %>%
  group_by(artist_names) %>%               # Put all songs by the same artist together
  summarise(total_streams = sum(streams),  # Add up all their streams
            .groups = "drop") %>%          # Remove grouping boxes
  arrange(desc(total_streams))             # Sort from biggest to smallest

#sanity check
stopifnot(nrow(spotify_jan) > 0, nrow(spotify_nov) > 0)


```

## Data visualisation checks

Once the data had been cleaned, visualisations were generated for both data sets to examine and compare differences in artist popularity. The x and y axes were swapped to improve readability of the artist names.

```{r}
# Select top 10 artists from January and November in order to see the difference before making final visualisation
jan_top10 <- jan_top_artists %>%
  slice_max(total_streams, n = 10)

# Create bar chart
ggplot(jan_top10, aes(x = reorder(artist_names, total_streams), 
                      y = total_streams)) +
  geom_col(fill = "#1DB954", color = "black") +
  coord_flip() +
  labs(title = "Top 10 Artists by Total Streams (January)", 
       x = "Artist", 
       y = "Total Streams")


#November
nov_top10 <- nov_top_artists %>%
  slice_max(total_streams, n = 10)

# Create bar chart
ggplot(nov_top10, aes(x = reorder(artist_names, total_streams), 
                      y = total_streams)) +
  geom_col(fill = "#1DB954", color = "black") +
  coord_flip() +
  labs(title = "Top 10 Artists by Total Streams (November)", 
       x = "Artist", 
       y = "Total Streams")



```

Next, it was necessary to combine the data sets and specificity which month the streaming data was from.

```{r}
# Add a month label to each dataset
jan_top_artists <- jan_top_artists %>%
  mutate(month = "January")

nov_top_artists <- nov_top_artists %>%
  mutate(month = "November")

# Combine both datasets into one
combined_artists <- bind_rows(jan_top_artists, nov_top_artists)

```

From the combined data, the top 10 artists were separated from each month.

```{r}
top10_artists <- combined_artists %>%
  group_by(month) %>%
  slice_max(total_streams, n = 10) %>%
  ungroup()
#Create a full set of artist/month combinations for the top artists
# This ensures every top artist has a row for each month
all_months <- expand_grid(
  artist_names = unique(top10_artists$artist_names),
  month = c("January", "November"))


```

```{r}
# Join the actual streams to this complete grid
# Missing artists, not appearing in a month, will have NA
plot_data <- all_months %>%
  left_join(combined_artists, by = c("artist_names", "month")) %>%
  # Replace NA streams with 0 for artists missing in that month
  mutate(total_streams = replace_na(total_streams, 0))


```

## Final visualisaton

Final visualisation compares the total streams of the top artists in January and November to show how artist popularity changes across the year. By presenting the data side-by-side, it is easy to see which artists maintain consistent popularity, which experience increases or decreases in streaming, and how new artists emerge in the charts. The flipped axes improve readability of artist names, and distinct colours (Spotify colour pallet) for each month allow for quick month-to-month comparisons. This visualisation helps highlight trends such as the impact of new album releases, seasonal listening patterns, and shifts in listener preferences throughout the year.

```{r}

# Plot side-by-side bar chart
ggplot(plot_data, aes(x = reorder(artist_names, total_streams), 
                      y = total_streams, 
                      fill = month)) +
  geom_col(position = "dodge") + #places bars for different months side by side for each artist (rather than stacked). This makes direct month-to-month comparisons easy.
  scale_fill_manual(values = c("January" = "#1DB954", "November" = "#191414")) +
  scale_y_continuous(labels = scales::comma) +
labs(
  title = "Top Artists Streams Comparison: January vs November",
  subtitle = "Comparing cumulative weekly streams for each month reveals shifts in year-end vs year-start popularity."
,
    x = "Artist",
    y = "Total Streams",
    fill = "Month"
  ) +
  theme_light(base_size = 12) +
  theme(
    axis.text.x = element_text(angle = 45, hjust = 1),#tilts names on x axis so artist names to not overlap
    legend.position = "top",
    panel.grid.minor = element_blank())

sessionInfo()

```

## Interactive Visualisation

To make the comparison more engaging and allow viewers to explore the data more closely, I decided to add an interactive feature using **plotly**. This lets you hover over bars to see exact stream numbers for each artist and month.

```{r}

p <- ggplot(plot_data, aes(x = reorder(artist_names, total_streams), 
                           y = total_streams, 
                           fill = month)) +
  geom_col(position = "dodge") +
  scale_fill_manual(values = c("January" = "#1DB954", "November" = "#191414")) +
  scale_y_continuous(labels = scales::comma) +
  labs(
    title = "Top Artists Streams Comparison: January vs November",
    subtitle = "Comparing cumulative weekly streams for each month reveals shifts in year-end vs year-start popularity.",
    x = "Artist",
    y = "Total Streams",
    fill = "Month"
  ) +
  theme_light(base_size = 12) +
  theme(
    axis.text.x = element_text(angle = 45, hjust = 1),
    legend.position = "top",
    panel.grid.minor = element_blank()
  )

ggplotly(p)

```

## Analysis and Interpretation

The data shows that artist popularity fluctuates significantly throughout the year, often corresponding with album releases or major promotional events. For example, Bad Bunny was the most-streamed artist in January, reflecting the release of his new album that week, but his streams declined to average levels by November. Conversely, Taylor Swift experienced higher streaming numbers in November, coinciding with her October album release. However, Sabrina Carpenter’s streams decreased in November compared to January despite her August album releases, suggesting that her newest release did not have the same impact as her 2024 album. These patterns highlight the importance of considering release timing, seasonality, and fan engagement when interpreting streaming data.

These visualisations also emphasize how new artists emerge in the charts while others maintain or lose popularity, providing insight into the dynamics of global streaming trends. One limitation of this analysis is that only two weeks of data were examined; broader temporal coverage would be necessary to confirm sustained trends and seasonal effects. Additionally, cumulative streams do not capture platform-specific promotional effects or regional variations, which could bias the interpretation.

### Reflections and Future Work

This project strengthened my skills in cleaning, wrangling, and visualising real-world data, while demonstrating the value of interactive visualisations for communicating insights effectively. Future work could expand to multiple weeks or months to investigate long-term trends, seasonal listening patterns, and the sustained impact of album releases on artist popularity. Incorporating interactivity, such as Plotly charts, also enhances accessibility and allows viewers to explore detailed comparisons between artists and months. Further extensions could include analyzing correlations between streaming trends and external factors like social media activity, release schedules, or genre-specific popularity.
